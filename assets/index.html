<html>
<head>
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>
</head>
<body>
    <script type="text/javascript">
        var sock = null;
        var wsuri = "ws://127.0.0.1:6222/ws";

        window.onload = function() {

            console.log("onload");

            sock = new WebSocket(wsuri);

            sock.onopen = function() {
                console.log("connected to " + wsuri);
            }

            sock.onclose = function(e) {
                console.log("connection closed (" + e.code + ")");
            }

            sock.onmessage = function(e) {
                console.log("message received: " + e.data);
				var div = document.createElement('div');
				div.className = 'row';
				div.innerHTML = '<h5>'+e.data+'</h5>';
				document.getElementById('output').appendChild(div);
            }
        };

		$(function () {
			$('#container').highcharts({
				chart: {
					type: 'spline'
				},
				title: {
					text: 'Benchmark History'
				},
				subtitle: {
					text: 'Generated by gobenchui'
				},
				xAxis: {
					categories: ['01/02/15', '02/02/15', '03/02/15', '06/03/15', '12/05/15']
				},
				yAxis: {
					title: {
						text: 'Time'
					},
					labels: {
						formatter: function () {
							return this.value + 'ns';
						}
					}
				},
				tooltip: {
					crosshairs: true,
					shared: true
				},
				plotOptions: {
					spline: {
						marker: {
							radius: 2,
							lineColor: '#666666',
							lineWidth: 1
						}
					}
				},
				series: [{
					name: 'StrconvConcat',
					data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 23.3, 18.3, 13.9, 9.6]

				}, {
					name: 'StrconvConcat',
					data: [4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
				}]
			});
		});
    </script>
    <h1>WebSocket Test</h1>
	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
	<div id="output"></div>
</body>
</html>
