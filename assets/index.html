<html>
<head>
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="http://momentjs.com/downloads/moment.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/main.css">
</head>
<body>
    <script type="text/javascript">
        var sock = null;
        var wsuri = "ws://127.0.0.1:6222/ws";

		var options_time = {
			chart: { type: 'spline', connectNulls: true, },
			title: { text: "{{ .PkgName }}" },
			subtitle: { text: "time benchmark (ns/op)" },
			xAxis: { reversed: true, categories: [], },
			yAxis: {
				labels: {
					title: { text: "Time" },
					formatter: function () { return this.value + 'ns'; }
				}
			},
			tooltip: { crosshairs: true, shared: true },
			{{ if .TimeSeries }} {{ .TimeSeries | json_stripped }} {{ end }}
		};

		var options_mem = {
			chart: { type: 'spline', connectNulls: true, },
			title: { text: "{{ .PkgName }}" },
			subtitle: { text: "memory benchmark (B/op)" },
			xAxis: { reversed: true, categories: [], },
			yAxis: {
				labels: {
					title: { text: "Memory" },
					formatter: function () { return this.value + 'B'; }
				}
			},
			tooltip: { crosshairs: true, shared: true },
			{{ if .MemSeries }} {{ .MemSeries | json_stripped }} {{ end }}
		};

		window.onload = function() {
			$('#time_benchmark').highcharts(options_time);
			$('#mem_benchmark').highcharts(options_mem);
			var chart_time = $('#time_benchmark').highcharts();
			var chart_mem = $('#mem_benchmark').highcharts();
		};
	</script>
	<script src="/static/websocket.js"></script>
	<h1>Go Benchmark UI</h1>
	<div style="float: right">
		<h2>{{ len .Commits }} commits</h2>
		<h3>{{ with last .Commits}}{{ .Date.Format "2006-01-02" }}{{ end }} - {{ with index .Commits 1 }}{{ .Date.Format "2006-01-02" }}{{ end }}</h3>
	</div>
	<div style="float: left">
		<h2>{{ .PkgName }}</h2>
		<h3>Path: {{ .PkgPath }}</h3>
	</div>
	<div style="text-align: center">
		<h2>Status: <span id="status">{{ .Status }}</span></h2>
		{{ if .CurrentCommit }}
		<h5 id="commit_block">Current commit: <span id="commit">{{ .CurrentCommit.Date.Format "2006-01-02 15:04:05" }} ({{ .CurrentCommit.Subject }})<br />Hash: {{ .CurrentCommit.Hash }}</span></h5>
		{{ end }}
	</div>
	<div class="container">
		<div class="half" id="time_benchmark"></div>
		<div class="half" id="mem_benchmark"></div>
	</div>
</body>
</html>
